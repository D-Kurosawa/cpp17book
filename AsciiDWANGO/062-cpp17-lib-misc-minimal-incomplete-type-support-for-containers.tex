%
% Section 9.16
\hypersection{section9-16}{コンテナーで不完全型のサポート}

\noindent
\textsf{注意}：この説明は上級者向けだ。

C++17では以下のコードが合法になった。このコードの挙動はC++14までは実装依存であった。

\begin{lstlisting}[language=C++]
struct X
{
    std::vector<X> v ;
    std::list<X> l ;
    std::forward_list<X> f ;
} ;
\end{lstlisting}

クラスはクラス定義の終了である~\lstinline!}!~を持って完全型となる。クラススコープに注入されたクラス名は、クラス定義の中ではまだ完全型ではない。不完全型をコンテナーの要素型に指定した場合の挙動は、C++14までは規定されていなかった。
\index{かんぜんがた@完全型}\index{ふかんぜんがた@不完全型}

C++17では、\lstinline!vector!, \lstinline!list!,
\lstinline!forward_list!に限り、要素型に一時的に不完全型を許すようになった。実際にコンテナーを使う際には完全型になっていなければならない。
